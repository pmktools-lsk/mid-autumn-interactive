<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>互動中秋影片</title>
<style>
  body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#111827;
    color:#fff;
    display:flex;
    height:100vh;
    overflow:hidden;
  }
  #left{
    flex:2;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    background:#000;
  }
  #right{
    flex:1;
    overflow-y:auto;
    padding:10px;
    background:#1e293b;
  }
  video{
    max-width:100%;
    max-height:62vh;
    background:#000;
  }
  #controls{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    justify-content:center;
    padding:10px;
  }
  button{
    padding:6px 12px;
    border:none;
    border-radius:6px;
    background:#374151;
    color:#fff;
    cursor:pointer;
  }
  button:hover{ background:#4b5563; }
  .yt{
    background:red;
    font-weight:bold;
  }

  /* ============ 填滿模式 / 縮放修正 ============ */
  .vw.fill video{
    width:100%;
    height:100%;
    max-height:none;
    object-fit:cover;
    object-position:50% 58%; /* 往上移一點，避免字幕壓到底 */
  }
  .vw.zoom video{
    transform:translateY(-1.5%) scale(var(--zoom,1));
    transform-origin:center;
  }
  #zoomBox{ display:flex;align-items:center;gap:6px;margin-top:6px; }
  #zoomBox.hidden{ display:none; }
</style>
</head>
<body>
  <div id="left">
    <div id="vw" class="vw">
      <video id="vid" controls>
        <source src="story.mov" type="video/mp4">
        <source src="story.mov" type="video/quicktime">
        您的瀏覽器不支援影片播放，請改用 Chrome。
      </video>
    </div>

    <div id="controls">
      <button id="prev">⏮ 上一句</button>
      <button id="play">▶️ 播放 / 暫停</button>
      <button id="next">⏭ 下一句</button>
      <button id="repeat">🔁 重複本句</button>
      <button id="autoPause">⏸ 逐句自動暫停</button>
      <button id="loop">🔂 整段循環</button>
      <button id="abLoop">🔁 點句即循環</button>
      <button id="cancelLoop">❌ 取消循環</button>
      <button id="fillToggle">🖼️ 填滿畫面</button>
      <a href="https://youtube.com/shorts/rz78e3Zhf1s" target="_blank">
        <button class="yt">📺 YouTube</button>
      </a>
    </div>

    <div id="zoomBox" class="hidden">
      <label>變焦</label>
      <input id="zoom" type="range" min="0.85" max="1.6" step="0.01" value="1">
    </div>
  </div>

  <div id="right">
    <h3>字幕對照 / 小測驗</h3>
    <div id="subs"></div>
  </div>

<script>
const subs=[
  {t:0, en:"The Mid-Autumn Festival falls on the fifteenth day of the eighth month in the Chinese lunar calendar.", zh:"中秋節在農曆八月十五這一天。"},
  {t:4, en:"It is a time to admire the big, round moon.", zh:"這是抬頭賞圓月的時刻。"},
  {t:9, en:"This has been a special day in China for a very long time.", zh:"在中國，這是一個流傳已久的特別節日。"}
];

const subsDiv=document.getElementById('subs');
subs.forEach(s=>{
  let p=document.createElement('p');
  p.textContent=`${new Date(s.t*1000).toISOString().substr(14,5)} ${s.en}\n${s.zh}`;
  subsDiv.appendChild(p);
});

const vid=document.getElementById('vid');
const vw=document.getElementById('vw');
const fillBtn=document.getElementById('fillToggle');
const zoomBox=document.getElementById('zoomBox');
const zoom=document.getElementById('zoom');

fillBtn.onclick=()=>{
  vw.classList.toggle('fill');
  const on=vw.classList.contains('fill');
  fillBtn.textContent=on ? '↩︎ 適應畫面' : '🖼️ 填滿畫面';
  zoomBox.classList.toggle('hidden', !on);
  vw.classList.toggle('zoom', on);

  if(on){
    zoom.min=0.85;
    zoom.max=1.6;
    zoom.step=0.01;
    zoom.value=0.96;                        // 安全縮小，避免切字幕
    vw.style.setProperty('--zoom',0.96);
  }else{
    vw.style.removeProperty('--zoom');
    zoom.value=1;
  }
};
zoom.oninput=()=>vw.style.setProperty('--zoom',zoom.value);
</script>
</body>
</html>




